(function(h){var m="jquery-tree";var u="jquery-tree-controls";var n="jquery-tree-collapseall";var b="jquery-tree-expandall";var e="jquery-tree-collapsed";var k="jquery-tree-handle";var v="jquery-tree-title";var c="jquery-tree-node";var g="jquery-tree-leaf";var f="jquery-tree-checked";var a="jquery-tree-unchecked";var l="jquery-tree-checked-partial";var p='<span class="'+n+' label label-important">Свернуть все</span>';var o='<span class="'+b+' label label-success">Развернуть все</span>';var t='<div class="'+u+'">'+p+o+"</div>";var q='<span class="'+k+'">+</span>';var j="+";var s="&minus;";h.fn.extend({Tree:function(){h(this).addClass(m).before(t).prev("."+u).find("."+n).on("click",function(){h(this).parent().next("."+m).find("li:has(ul)").addClass(e).find("."+k).html(j)}).parent("."+u).find("."+b).on("click",function(){h(this).parent().next("."+m).find("li:has(ul)").removeClass(e).find("."+k).html(s)});h("li",this).find(":first").addClass(v).closest("li").addClass(g);h(this).find("li:has(ul:has(li))").find(":first").before(q).closest("li").addClass(c).addClass(e).removeClass(g);h("."+k).on("click",function(){var x=h(this).parent("li");var w=x.find(">."+k);x.toggleClass(e);if(x.hasClass(e)){w.html(j)}else{w.html(s)}});h("input:checkbox").on("click",function(){d(this);i(this)}).each(function(){d(this)})}});function r(A){if(typeof A=="undefined"||!A){return}var x=h(A).closest("ul");var z=x.find("input:checkbox");var B=x.find("input:checkbox:checked");var w=z.length===B.length;var y=x.closest("li").find(">."+v+" input:checkbox");if(y.length>0){y.get(0).checked=w;if(!w&&B.length>0){y.closest("label").addClass(l).removeClass(f).removeClass(a)}else{if(w){y.closest("label").removeClass(l).removeClass(a).addClass(f)}else{y.closest("label").removeClass(l).removeClass(f).addClass(a)}}}}function i(w){h(w).parent("li").find("input:checkbox").each(function(){console.log(this);this.checked=h(w).attr("checked",true);d(this)})}function d(w){isChecked=h(w).is(":checked");if(isChecked){h(w).parent("label").addClass(f).removeClass(a).removeClass(l).attr("checked",true)}else{h(w).parent("label").addClass(a).removeClass(f).removeClass(l).attr("checked",false)}}})(jQuery);