<div>

    <a id="{{ id }}"  href="" data-toggle="modal" data-target="#{{ uniqid }}"
       class="editable{% if(value is empty) %} empty{% endif %}"
            >
        {% if(value is empty) %}
            empty
        {% else %}
            {{ value }}
        {% endif %}
    </a>
    <div class="editable_text_popover modal-content" id="popup-{{ id }}" style="display: none">

        <div class="modal-body">
            <form id="{{ form_id }}" method="post" action="{{ url }}" onsubmit="return false">
                <div class="form-inputs">
                    {{ form_row(form) }}
                </div>
                <input type="submit" class="btn btn-primary" value="Сохранить"/>
                <button type="button" class="btn btn-danger">Отмена</button>
            </form>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function(){
            (function(){
                var popup = $('#popup-{{ id }}').popup({
                    closeSelectors: ['.btn-danger']
                });
                $("body").on('click','#{{ id }}',function () {
                    popup.open($(this), {left: 0, bottom: 0});
                });
                var value = !!"{{ value }}";

                var el = $('#{{ id }}');
                var form = $('#{{ form_id }}');

                form.on('submit',function(){
                    popup.close();
                    el.html($('<div>',{
                        'class' : 'loading'
                    }));
                    $.post("{{ url }}",form.serialize(),function(res){
                        form.find('.form-inputs').html(res.form);
                        el.html(res.string);
                    });
                    return false;
                });
            })();
        });
    </script>
</div>





