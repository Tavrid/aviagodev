{% extends "BundlesDefaultBundle:Layouts:main.html.twig" %}
{% block body %}
    <div class="row">
        <div class="col-md-8">
            <form action="" method="post">

                <div class="col-md-6">
                    {{ form_row(form.city_from) }}
                    {{ form_row(form.date_from) }}
                    <div class="col-md-3">
                        {{ form_row(form.adults) }}
                        {{ form_row(form.children) }}
                    </div>
                    <div class="col-md-9">
                        {{ form_row(form.class) }}
                        {{ form_row(form.avia_company) }}
                    </div>
                </div>
                <div class="col-md-6">
                    {{ form_row(form.city_to) }}
                    {{ form_row(form.date_to) }}
                        {{ form_row(form.currency) }}
                    <div class="col-md-4">
                        {{ form_row(form.best_price) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_row(form.direct_flights) }}

                    </div>
                    <div class="col-md-4">
                        <input type="submit" class="btn btn-default"/>
                    </div>

                </div>
                {{ form_row(form._token) }}
            </form>
        </div>
    </div>
<script>
    $(function() {


        $( "#SearchForm_city_from" ).autocomplete({
            source: function( request, response ) {
                $.ajax({
                    url: "{{ path('bundles_default_search_city') }}",
                    dataType: "json",
                    data: {
                        q: request.term
                    },
                    success: function( data ) {
                        console.log(data);
                        var arr = [];

                        $.each(data, function(key, val) {
                            arr.push({
                                value: val.name,
                                'data-value': val.id
                            });
                        });

                        response(arr.slice(0, 10));
                    }
                });
            },
            minLength: 3,
            select: function( event, ui ) {
                $( "#SearchForm_city_from").attr('data-value',ui.item['data-value'])
            }
        });
    });
</script>
{% endblock %}

